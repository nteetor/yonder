/*!
  * bsides v0.2.0.9000 (https://nteetor.github.com/yonder)
  * Copyright 2011-2025 Nathan Teetor <nate@haufin.ch>
  * Licensed under MIT (https://github.com/nteetor/yonder/blob/main/LICENSE.note)
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery"),require("Shiny")):"function"==typeof define&&define.amd?define(["jquery","Shiny"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).$,e.Shiny)}(this,(function(e,t){"use strict";const s="bsides";function n(e,t){window.Shiny&&Shiny.addCustomMessageHandler(`${s}:${e}`,t)}function r(e){window.Shiny&&Shiny.inputBindings.register(new e,`${s}.${e.type}`)}class i{static get prefix(){return s}static get type(){throw"not implemented"}static get namespace(){return`.${this.type}`}get events(){return[]}constructor(){this.priority="deferred"}find(t){return e(t).find(`.${this.constructor.prefix}-${this.constructor.type}`)}getId(e){return e.id}getType(e){return null}getValue(e){throw"not implemented"}subscribe(t,s){this.events.forEach((n=>{const r=`${n.type||n}.${this.constructor.prefix}${this.constructor.namespace}`,i=n.selector||null;e(t).on(r,i,(e=>{s(this.priority)}))}))}unsubscribe(t){e(t).off(this.namespace)}receiveMessage(e,t){throw"not implemented"}getState(e){throw"not implemented"}getRatePolicy(e){return null}initialize(e){}dispose(e){}}class a extends i{static get type(){return"button"}get events(){return["click"]}get data(){return{clicks:`${this.constructor.prefix}-clicks`}}initialize(t){const s=e(t);s.data(this.data.clicks,0),s.on(`click${this.constructor.namespace}`,(e=>{const t=+s.data(this.data.clicks);s.data(this.data.clicks,t+1)}))}getType(e){return`${this.constructor.prefix}${this.constructor.namespace}`}getValue(t){return e(t).data(this.data.clicks)}receiveMessage(e,t){}}class c extends i{static get type(){return"checkbox"}get events(){return["change"]}get selectors(){return{label:".form-check-label",value:".form-check-input"}}getValue(t){return e(t).children(this.selectors.value).prop("checked")}receiveMessage(t,s){const n=e(t),r=n.find(this.selectors.label),i=n.find(this.selectors.value);s.hasOwnProperty("choice")&&r.html(s.choice),s.hasOwnProperty("value")&&i.prop("checked",s.value),s.hasOwnProperty("disable")&&i.prop("disabled",s.disable),n.trigger("change")}}class o extends i{static get type(){return"checkboxgroup"}get events(){return["change"]}get selectors(){return{choice:".form-check-label,.btn",value:".form-check-input,.btn-check"}}getType(e){return`${this.constructor.prefix}${this.constructor.namespace}`}getValue(t){return e(t).find(this.selectors.value).filter(":checked").map(((e,t)=>t.value)).get()}receiveMessage(t,s){const n=e(t),r=n.find(this.selectors.value);s.hasOwnProperty("options")&&(n.find(".form-check").remove(),n.html(s.options)),s.hasOwnProperty("select")&&(r.prop("checked",!1),r.filter(((e,t)=>s.select.includes(t.value))).prop("checked",!0)),s.hasOwnProperty("disable")&&(r.prop("disabled",!1),r.filter(((e,t)=>s.disable.includes(t.value))).prop("disabled",!0)),n.trigger("change")}}class l{static create(e){if(!e)return;const t=document.createElement("div");t.classList.add("chip"),t.setAttribute("data-value",e);const s=document.createElement("button");return s.setAttribute("type","button"),s.classList.add("btn-close"),t.innerText=e,t.appendChild(s),t}static addEventListeners(){e(document).on("click.bsides.chip",".chip .btn-close",(t=>{const s=t.currentTarget;e(s.parentElement).trigger("chip:remove.bsides.chip")})),e(document).on("chip:remove.bsides.chip",".chip",(e=>{e.currentTarget.remove()}))}}e(document).on("chip:remove",(e=>{console.log(e)}));class u{#e;#t;#s;static#n=new WeakMap;get selectors(){return{}}constructor(e){this.#e=e,this.#s=e.querySelector(".multi-select-input"),this.#t=e.querySelector(".chip-group"),this.constructor.#n.set(e,this)}value(){return Array.from(this.#t.children).map((e=>e.dataset.value))}text(){return this.#s.value}add(){const t=l.create(this.text());this.#t.appendChild(t),this.#s.value="",e(this.#e).trigger("update.bsides.multiselect")}static addEventListeners(){e(document).on("keyup.bsides.multiselect",".multi-select",(e=>{if("Enter"==e.key||13==e.keyCode){const t=u.getInstance(e.currentTarget);if(!t)return;t.add()}}))}static getInstance(e){return this.#n.get(e)}}l.addEventListeners(),u.addEventListeners(),r(class extends i{static get type(){return"multiselect"}get events(){return["update","chip:remove"]}get selectors(){}getType(e){}getValue(e){const t=u.getInstance(e);if(t)return t.value()}initialize(e){new u(e)}receiveMessage(e,t){}});class d extends i{static get type(){return"form"}get events(){return[{event:"click",selector:this.selectors.submit}]}get selectors(){return{submit:".bsides-btn-submit"}}get data(){return{value:`${this.constructor.prefix}-value`}}initialize(t){const s=e(t);let n=new Map;s.on(`shiny:inputchanged${this.constructor.namespace}`,(e=>{if(e.el&&"event"!==e.priority&&t.contains(e.el)){const t=e.inputType?`${e.name}:${e.inputType}`:e.name;n.set(t,e.value),e.preventDefault()}})),s.on(`click${this.constructor.namespace}`,this.selectors.submit,(e=>{e.preventDefault();for(const[e,t]of n.entries())Shiny.setInputValue(e,t,{priority:"event"});const t=e.currentTarget.value;s.data(this.data.value,t)}))}getValue(t){return e(t).data(this.data.value)}receiveMessage(t,s){const n=e(t);if(s.hasOwnProperty("submit")){const e=s.submit;n.find(`${this.selectors.submit}[value=${e}]`).trigger("click")}}}class h extends i{static get type(){return"link"}get events(){return["click"]}get data(){return{clicks:`${this.constructor.prefix}-clicks`}}initialize(t){const s=e(t);s.data(this.data.clicks,0),s.on(`click${this.constructor.namespace}`,(e=>{const t=+s.data(this.data.clicks);s.data(this.data.clicks,t+1)}))}getType(e){return`${this.constructor.prefix}${this.constructor.namespace}`}getValue(t){return e(t).data(this.data.clicks)}}class p extends i{static get type(){return"listgroup"}get events(){return["click"]}get selectors(){return{choice:".list-group-item-action",value:".list-group-item-action"}}get data(){return{value:`${this.constructor.prefix}-value`}}initialize(t){e(t).on("click",this.selectors.choice,(t=>{e(t.currentTarget).toggleClass("active")}))}getValue(t){return e(t).find(`${this.selectors.value}.active`).map(((e,t)=>t.getAttribute(`data-${this.data.value}`))).get()}}class g extends i{static get type(){return"menu"}get events(){return[{type:"click",selector:this.selectors.choice}]}get selectors(){return{choice:".dropdown-item",value:".dropdown-item"}}get data(){return{value:`${this.constructor.prefix}-value`}}initialize(t){const s=e(t);s.on("click",this.selectors.value,(e=>{s.data(this.data.value,e.currentTarget.value)}))}getValue(t){return e(t).data(this.data.value)}}class v extends i{static get type(){return"radiogroup"}get events(){return["change"]}get selectors(){return{choice:".form-check-label,.btn",value:".form-check-input,.btn-check"}}getValue(t){return e(t).find(this.selectors.value).filter(":checked").val()}receiveMessage(t,s){const n=e(t),r=n.find(this.selectors.value);s.hasOwnProperty("options")&&(n.find(".form-check").remove(),n.html(s.options)),s.hasOwnProperty("select")&&(r.prop("checked",!1),r.filter(((e,t)=>s.select.includes(t.value))).prop("checked",!0)),s.hasOwnProperty("disable")&&(r.prop("disabled",!1),r.filter(((e,t)=>s.disable.includes(t.value))).prop("disabled",!0)),n.trigger("change")}}class m extends i{static get type(){return"range"}get events(){return["change"]}get selectors(){return{value:".form-range"}}getValue(t){return+e(t).find(this.selectors.value).val()}receiveMessage(t,s){const n=e(t),r=n.find(this.selectors.value);s.hasOwnProperty("value")&&r.val(s.value),s.hasOwnProperty("disable")&&r.prop("disable",s.disable),n.trigger("change")}}class y extends i{static get type(){return"select"}get events(){return["change"]}get selectors(){return{value:"option"}}getValue(e){return e.value}receiveMessage(t,s){const n=e(t);if(console.log(s),s.hasOwnProperty("options")&&(n.find(this.selectors.value).remove(),n.html(s.options)),s.hasOwnProperty("select")&&n.val(s.select),s.hasOwnProperty("disable")){console.log("disable");const e=n.find("option");e.prop("disabled",!1),e.filter(((e,t)=>s.disable.includes(t.value))).prop("disabled",!0)}n.trigger("change")}}class f extends i{static get type(){return"text"}get events(){return["keyup","input","change"]}get selectors(){return{value:"input"}}getValue(e){return e.value}getRatePolicy(e){return{policy:"debounce",delay:250}}receiveMessage(t,s){const n=e(t);s.hasOwnProperty("value")&&n.val(s.value),s.hasOwnProperty("disable")&&n.prop("disabled",s.disable),n.trigger("change")}}class b extends i{static get type(){return"textgroup"}get events(){return["keyup","input","change"]}get selectors(){return{value:"input",text:".input-group-text"}}getValue(t){const s=e(t);return s.find(this.selectors.value).val()?s.find(`${this.selectors.text},${this.selectors.value}`).map(((e,t)=>t.innerText||t.value||"")).get().join(""):null}getRatePolicy(e){return{policy:"debounce",delay:250}}receiveMessage(t,s){const n=e(t),r=e(t).find(this.selectors.value);s.hasOwnProperty("value")&&r.val(s.value),s.hasOwnProperty("disable")&&r.prop("disabled",s.disable),n.trigger("change")}}class w extends bootstrap.Toast{constructor(e){super(e,{})}get state(){return this.isShown()?"shown":"hidden"}show(e){e&&(this._config.delay=e,this._config.autohide=!0),super.show()}static addMessageHandlers(){n("toastAdd",(async function(e){if(!e.target)return;const s=document.getElementById(e.target);s&&await t.renderContentAsync(s,e.toast,"beforeend")}))}}w.addMessageHandlers(),r(class extends i{static get type(){return"toast"}get events(){return["shown.bs.toast","hidden.bs.toast"]}initialize(e){new w(e)}getValue(e){const t=w.getInstance(e);if(t)return t.state}receiveMessage(e,t){const s=w.getInstance(e);s&&("show"===t.method?s.show(t.duration):"hide"===t.method&&s.hide())}});class k extends bootstrap.Modal{isShown(){return this._isShown}static addMessageHandlers(){n("modalShow",(e=>{if("object"==typeof e.modal)this.showOrInsertModal(e.modal);else{const t=document.getElementById(e.modal);if(!t)return;k.getOrCreateInstance(t).show()}}))}static async showOrInsertModal(e){const s=document.createElement("div");s.innerHTML=e.html;const n=s.firstChild&&s.firstChild.id,r=document.getElementById(n);r&&(t.unbindAll(r,!0),r.remove()),await t.renderContentAsync(document.body,e,"beforeend"),new k(document.getElementById(n)).show()}}var x;k.addMessageHandlers(),r(class extends i{static get type(){return"modal"}get events(){return["shown.bs.modal","hidden.bs.modal"]}getValue(e){const t=k.getInstance(e);return t?t.isShown()?"shown":"hidden":null}}),x=()=>{r(a),r(c),r(o),r(d),r(h),r(p),r(g),r(v),r(m),r(y),r(f),r(b)},"complete"===document.readyState?x():document.addEventListener("DOMContentLoaded",x)}));
//# sourceMappingURL=bsides.min.js.map