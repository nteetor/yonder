{"version":3,"names":["inputStore","Map","InputStore","set","element","key","instance","has","instanceStore","get","size","remove","store","delete","Input","BINDING_KEY","this","NAME","EVENT_KEY","EVENTS","SELECTOR","constructor","_element","_value","_debounce","_callback","debounce","value","x","content","dispose","find","scope","$","getId","id","getType","getValue","input","subscribe","callback","unsubscribe","receiveMessage","data","method","args","Object","entries","getState","getRatePolicy","initialize","ShinyInterface","ButtonInput","super","innerHTML","disable","setAttribute","removeAttribute","document","on","event","button","currentTarget","Shiny","inputBindings","register"],"sources":["../../js/input-store.js","../../js/input.js","../../js/button.js","../../js/bsides.js"],"sourcesContent":["const inputStore = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!inputStore.has(element)) {\n      inputStore.set(element, new Map())\n    }\n\n    const instanceStore = inputStore.get(element)\n\n    if (!instanceStore.has(key) && instanceStore.size !== 0) {\n      return\n    }\n\n    instanceStore.set(key, instance)\n  },\n  get(element, key) {\n    if (inputStore.has(element)) {\n      return inputStore.get(element).get(key) || null\n    }\n\n    return null\n  },\n  remove(element, key) {\n    if (!inputStore.has(element)) {\n      return\n    }\n\n    const store = inputStore.get(element)\n\n    store.delete(key)\n\n    if (store.size === 0) {\n      inputStore.delete(element)\n    }\n  }\n}","import $ from 'jquery'\n\nimport InputStore from './input-store.js'\n\nclass Input {\n  // getters\n\n  static get BINDING_KEY() {\n    return `bsides.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.BINDING_KEY}`\n  }\n\n  static get EVENTS() {\n    return null\n  }\n\n  static get SELECTOR() {\n    return `.bsides-${this.NAME}`\n  }\n\n  // public\n\n  constructor(element) {\n    this._element = element\n    this._value = null\n    this._debounce = false\n    this._callback = (debounce) => {}\n\n    InputStore.set(element, this.constructor.BINDING_KEY, this)\n  }\n\n  value(x) {\n    return null\n  }\n\n  content(x) {\n    return null\n  }\n\n  dispose() {\n    this._callback = () => {}\n    InputStore.remove(element, this.constructor.BINDING_KEY)\n  }\n\n  // static\n\n  static find(scope) {\n    return $(scope).find(this.SELECTOR)\n  }\n\n  static getId(element) {\n    return element.id\n  }\n\n  static getType(element) {\n    return null\n    element // unused\n  }\n\n  static getValue(element) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return null\n    }\n\n    return input.value()\n  }\n\n  static subscribe(element, callback) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    input._callback = callback\n  }\n\n  static unsubscribe(element) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static receiveMessage(element, data) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    for (const [method, args] of Object.entries(data)) {\n      input[method](args)\n    }\n  }\n\n  static getState(element) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    return { value: input.value() }\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  static getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  static initialize(element) {\n    element // unused\n  }\n\n  static dispose(element) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static ShinyInterface() {\n    return this\n  }\n}\n\nexport default Input\n","import $ from 'jquery'\n\nimport InputStore from './input-store.js'\nimport Input from './input.js'\n\nclass ButtonInput extends Input {\n  static get NAME() {\n    return 'button'\n  }\n\n  static get EVENTS() {\n    return `click${this.EVENT_KEY}`\n  }\n\n  constructor(element) {\n    super(element)\n\n    this._value = 0\n  }\n\n  value(x) {\n    if (typeof x === 'undefined') {\n      return this._value\n    }\n\n    this._value = x\n    this._callback(this._debounce)\n\n    return this\n  }\n\n  content(x) {\n    this._element.innerHTML = x\n\n    return this\n  }\n\n  // this argument name is garbo\n  disable(x) {\n    if (x === true) {\n      this._element.setAttribute('disabled', '')\n    } else {\n      this._element.removeAttribute('disabled')\n    }\n\n    return this\n  }\n\n  static initialize(element) {\n    let input = InputStore.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      input = new ButtonInput(element)\n    }\n  }\n}\n\n$(document).on(ButtonInput.EVENTS, ButtonInput.SELECTOR, (event) => {\n  let button = InputStore.get(event.currentTarget, ButtonInput.BINDING_KEY)\n\n  if (!button) {\n    return\n  }\n\n  button.value(button.value() + 1)\n})\n\nif (Shiny) {\n  Shiny.inputBindings.register(ButtonInput.ShinyInterface())\n}\n\nexport default ButtonInput\n","import ButtonInput from './button.js'\n\nexport default {\n  ButtonInput\n}\n"],"mappings":"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","ignoreList":[]}