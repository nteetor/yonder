{"version":3,"names":["InputBinding","prefix","type","namespace","this","events","constructor","priority","find","scope","$","getId","element","id","getType","getValue","subscribe","callback","forEach","event","on","unsubscribe","off","receiveMessage","data","getState","getRatePolicy","initialize","dispose","CheckboxInputBinding","selectors","choice","value","console","log","pairs","map","i","e","checked","get","Object","fromEntries","$element","$values","hasOwnProperty","remove","html","options","prop","filter","select","includes","disable","trigger","CheckboxButtonInputBinding","FormInputBinding","submit","inputValues","Map","el","contains","set","name","preventDefault","key","entries","Shiny","setInputValue","inputBindings","register","registerInputBindings"],"sources":["../../js/bindings/inputs/input.js","../../js/bindings/inputs/checkbox.js","../../js/bindings/inputs/checkbox-button.js","../../js/bindings/inputs/form.js","../../js/bindings/inputs/index.js","../../js/bsides.js"],"sourcesContent":["import $ from 'jquery'\n\nclass InputBinding {\n  static get prefix() {\n    return 'bsides'\n  }\n\n  static get type() {\n    throw 'not implemented'\n  }\n\n  static get namespace() {\n    return `.${this.type}`\n  }\n\n  get events() {\n    return []\n  }\n\n  constructor() {\n    this.priority = 'deferred'\n  }\n\n  find(scope) {\n    return $(scope).find(`.${this.constructor.prefix}-${this.constructor.type}`)\n  }\n\n  getId(element) {\n    return element.id\n  }\n\n  getType(element) {\n    return null\n  }\n\n  getValue(element) {\n    throw 'not implemented'\n  }\n\n  subscribe(element, callback) {\n    this.events.forEach((event) => {\n      $(element).on(`${event}${this.constructor.namespace}`, () => {\n        callback(this.priority)\n      })\n    })\n  }\n\n  unsubscribe(element) {\n    $(element).off(this.namespace)\n  }\n\n  receiveMessage(element, data) {\n    throw 'not implemented'\n  }\n\n  getState(element) {\n    throw 'not implemented'\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  initialize(element) {\n\n  }\n\n  dispose(element) {\n\n  }\n}\n\nexport default InputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxInputBinding extends InputBinding {\n  static get type() {\n    return 'checkbox'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      choice: '.form-check-label',\n      value: '.form-check-input'\n    }\n  }\n\n  getType(element) {\n    console.log(this.constructor)\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    let pairs =\n      $(element)\n      .find(this.selectors.value)\n      .map((i, e) => [[e.value, e.checked]])\n      .get()\n\n    return Object.fromEntries(pairs)\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n    const $values = $element.find(this.selectors.value)\n\n    if (data.hasOwnProperty('options')) {\n      $element.find('.form-check').remove()\n      $element.html(data.options)\n    }\n\n    if (data.hasOwnProperty('select')) {\n      $values.prop('checked', false)\n\n      $values\n        .filter((i, e) => data.select.includes(e.value))\n        .prop('checked', true)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $values.prop('disabled', false)\n\n      $values\n        .filter((i, e) => data.disable.includes(e.value))\n        .prop('disabled', true)\n    }\n\n    $element.trigger('change')\n  }\n}\n\nexport default CheckboxInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxButtonInputBinding extends InputBinding {\n  static get type() {\n    return 'checkboxbutton'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      choice: '.btn',\n      value: '.btn-check'\n    }\n  }\n\n  getType(element) {\n    console.log(this.constructor)\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    let pairs =\n      $(element)\n      .find(this.selectors.value)\n      .map((i, e) => [[e.value, e.checked]])\n      .get()\n\n    return Object.fromEntries(pairs)\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n    const $values = $element.find(this.selectors.value)\n\n    if (data.hasOwnProperty('options')) {\n      $element\n        .find(`${this.selectors.choice},${this.selectors.value}`)\n        .remove()\n\n      $element.html(data.options)\n    }\n\n    if (data.hasOwnProperty('select')) {\n      $values.prop('checked', false)\n\n      console.log($values)\n      console.log($values.filter((i, e) => data.select.includes(e.value)))\n\n      $values\n        .filter((i, e) => data.select.includes(e.value))\n        .prop('checked', true)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $values.prop('disabled', false)\n\n      $values\n        .filter((i, e) => data.disable.includes(e.value))\n        .prop('disabled', true)\n    }\n\n    $element.trigger('change')\n  }\n}\n\nexport default CheckboxButtonInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass FormInputBinding extends InputBinding {\n  static get type() {\n    return 'form'\n  }\n\n  get events() {\n    return ['submit']\n  }\n\n  get selectors() {\n    return {\n      submit: '.bsides-btn-submit'\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    let inputValues = new Map()\n\n    $element.on(`shiny:inputchanged${this.constructor.namespace}`, (event) => {\n      console.log(event)\n\n      if (!event.el || event.priority === 'event') {\n        return\n      }\n\n      if (event.el.id === element.id) {\n        // Shiny.setInputValue(element.id, value, { priority: 'event' })\n        event.preventDefault()\n        return\n      }\n\n      if (element.contains(event.el)) {\n        inputValues.set(event.name, event.value)\n        event.preventDefault()\n      }\n    })\n\n    $element.on(`click${this.constructor.namespace}`, this.selectors.submit, (event) => {\n      event.preventDefault()\n\n      for (const [key, value] of inputValues.entries()) {\n        console.log(`${key}: ${value}`)\n        Shiny.setInputValue(key, value, { priority: 'event' })\n      }\n    })\n  }\n\n  getValue(element) {\n    return null\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n\n    if (data.submit === true) {\n      $element.trigger(`submit${namespace}`)\n    }\n  }\n}\n\nexport default FormInputBinding\n","import CheckboxInputBinding from './checkbox.js'\nimport CheckboxButtonInputBinding from './checkbox-button.js'\nimport FormInputBinding from './form.js'\n\nfunction registerInputBindings() {\n  if (Shiny) {\n    const inputBindings = Shiny.inputBindings\n\n    inputBindings.register(new CheckboxInputBinding(), CheckboxInputBinding.type)\n    inputBindings.register(new CheckboxButtonInputBinding(), CheckboxButtonInputBinding.type)\n    inputBindings.register(new FormInputBinding(), FormInputBinding.type)\n  }\n}\n\nexport {\n  registerInputBindings\n}","import { registerInputBindings } from './bindings/inputs'\n\nregisterInputBindings()\n"],"mappings":"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","ignoreList":[]}