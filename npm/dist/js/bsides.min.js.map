{"version":3,"names":["InputBinding","prefix","type","namespace","this","events","constructor","priority","find","scope","$","getId","element","id","getType","getValue","subscribe","callback","forEach","e","event","selector","on","unsubscribe","off","receiveMessage","data","getState","getRatePolicy","initialize","dispose","ButtonInputBinding","clicks","$element","CheckboxInputBinding","selectors","label","value","children","prop","hasOwnProperty","html","choice","console","log","disable","CheckboxGroupInputBinding","filter","map","i","el","get","$values","remove","options","select","includes","trigger","FormInputBinding","submit","inputValues","Map","contains","name","inputType","set","preventDefault","key","entries","Shiny","setInputValue","currentTarget","LinkInputBinding","ListGroupInputBinding","toggleClass","getAttribute","inputBindings","register","registerInputBindings"],"sources":["../../js/bindings/inputs/input.js","../../js/bindings/inputs/button.js","../../js/bindings/inputs/checkbox.js","../../js/bindings/inputs/checkbox-group.js","../../js/bindings/inputs/form.js","../../js/bindings/inputs/link.js","../../js/bindings/inputs/list-group.js","../../js/bindings/inputs/index.js","../../js/bsides.js"],"sourcesContent":["import $ from 'jquery'\n\nclass InputBinding {\n  static get prefix() {\n    return 'bsides'\n  }\n\n  static get type() {\n    throw 'not implemented'\n  }\n\n  static get namespace() {\n    return `.${this.type}`\n  }\n\n  get events() {\n    return []\n  }\n\n  constructor() {\n    this.priority = 'deferred'\n  }\n\n  find(scope) {\n    return $(scope).find(`.${this.constructor.prefix}-${this.constructor.type}`)\n  }\n\n  getId(element) {\n    return element.id\n  }\n\n  getType(element) {\n    return null\n  }\n\n  getValue(element) {\n    throw 'not implemented'\n  }\n\n  subscribe(element, callback) {\n    this.events.forEach((e) => {\n      const event = `${e.type ? e.type : e}${this.constructor.namespace}`\n      const selector = e.selector ? e.selector : (null)\n\n      $(element).on(event, selector, (e) => {\n        callback(this.priority)\n      })\n    })\n  }\n\n  unsubscribe(element) {\n    $(element).off(this.namespace)\n  }\n\n  receiveMessage(element, data) {\n    throw 'not implemented'\n  }\n\n  getState(element) {\n    throw 'not implemented'\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  initialize(element) {\n\n  }\n\n  dispose(element) {\n\n  }\n}\n\nexport default InputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass ButtonInputBinding extends InputBinding {\n  static get type() {\n    return 'button'\n  }\n\n  get events() {\n    return ['click']\n  }\n\n  get data() {\n    return {\n      clicks: `${this.constructor.prefix}-clicks`\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    $element.data(this.data.clicks, 0)\n\n    $element.on(`click${this.constructor.namespace}`, (event) => {\n      const clicks = +$element.data(this.data.clicks)\n      $element.data(this.data.clicks, clicks + 1)\n    })\n  }\n\n  getType(element) {\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    return $(element).data(this.data.clicks)\n  }\n\n  receiveMessage(element, data) {\n\n  }\n}\n\nexport default ButtonInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxInputBinding extends InputBinding {\n  static get type() {\n    return 'checkbox'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      label: '.form-check-label',\n      value: '.form-check-input'\n    }\n  }\n\n  getValue(element) {\n    return $(element).children(this.selectors.value).prop('checked')\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n\n    if (data.hasOwnProperty('choice')) {\n      $element.find(this.selectors.label).html(data.choice)\n    }\n\n    if (data.hasOwnProperty('value')) {\n      console.log(data.value)\n      $element.find(this.selectors.value).prop('checked', data.value)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $element.find(this.selectors.value).prop('disabled', data.disable)\n    }\n  }\n}\n\nexport default CheckboxInputBinding","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxGroupInputBinding extends InputBinding {\n  static get type() {\n    return 'checkboxgroup'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      choice: '.form-check-label,.btn',\n      value: '.form-check-input,.btn-check'\n    }\n  }\n\n  getType(element) {\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    return $(element)\n      .find(this.selectors.value)\n      .filter(':checked')\n      .map((i, el) => el.value)\n      .get()\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n    const $values = $element.find(this.selectors.value)\n\n    if (data.hasOwnProperty('options')) {\n      $element.find('.form-check').remove()\n      $element.html(data.options)\n    }\n\n    if (data.hasOwnProperty('select')) {\n      $values.prop('checked', false)\n\n      $values\n        .filter((i, e) => data.select.includes(e.value))\n        .prop('checked', true)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $values.prop('disabled', false)\n\n      $values\n        .filter((i, e) => data.disable.includes(e.value))\n        .prop('disabled', true)\n    }\n\n    $element.trigger('change')\n  }\n}\n\nexport default CheckboxGroupInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass FormInputBinding extends InputBinding {\n  static get type() {\n    return 'form'\n  }\n\n  get events() {\n    return [\n      { event: 'click', selector: this.selectors.submit }\n    ]\n  }\n\n  get selectors() {\n    return {\n      submit: '.bsides-btn-submit'\n    }\n  }\n\n  get data() {\n    return {\n      value: `${this.constructor.prefix}-value`\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    let inputValues = new Map()\n\n    $element.on(`shiny:inputchanged${this.constructor.namespace}`, (event) => {\n      if (!event.el || event.priority === 'event') {\n        return\n      }\n\n      if (element.contains(event.el)) {\n        const name = event.inputType ? `${event.name}:${event.inputType}` : event.name\n\n        inputValues.set(name, event.value)\n        event.preventDefault()\n      }\n    })\n\n    $element.on(`click${this.constructor.namespace}`, this.selectors.submit, (event) => {\n      event.preventDefault()\n\n      for (const [key, value] of inputValues.entries()) {\n        Shiny.setInputValue(key, value, { priority: 'event' })\n      }\n\n      const value = event.currentTarget.value\n\n      $element.data(this.data.value, value)\n    })\n  }\n\n  getValue(element) {\n    return $(element).data(this.data.value)\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n\n    if (data.hasOwnProperty('submit')) {\n      const value = data.submit\n\n      $element\n        .find(`${this.selectors.submit}[value=${value}]`)\n        .trigger('click')\n    }\n  }\n}\n\nexport default FormInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass LinkInputBinding extends InputBinding {\n  static get type() {\n    return 'link'\n  }\n\n  get events() {\n    return ['click']\n  }\n\n  get data() {\n    return {\n      clicks: `${this.constructor.prefix}-clicks`\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    $element.data(this.data.clicks, 0)\n\n    $element.on(`click${this.constructor.namespace}`, (event) => {\n      const clicks = +$element.data(this.data.clicks)\n      $element.data(this.data.clicks, clicks + 1)\n    })\n  }\n\n  getType(element) {\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    return $(element).data(this.data.clicks)\n  }\n}\n\nexport default LinkInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass ListGroupInputBinding extends InputBinding {\n  static get type() {\n    return 'listgroup'\n  }\n\n  get events() {\n    return ['click']\n  }\n\n  get selectors() {\n    return {\n      choice: '.list-group-item-action',\n      value: '.list-group-item-action'\n    }\n  }\n\n  get data() {\n    return {\n      value: `${this.constructor.prefix}-value`\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    $element.on('click', this.selectors.choice, (event) => {\n      const $choice = $(event.currentTarget)\n\n      $choice.toggleClass('active')\n    })\n  }\n\n  getValue(element) {\n    return $(element)\n      .find(`${this.selectors.value}.active`)\n      .map((i, el) => el.getAttribute(`data-${this.data.value}`))\n      .get()\n  }\n}\n\nexport default ListGroupInputBinding","import ButtonInputBinding from './button.js'\nimport CheckboxInputBinding from './checkbox.js'\nimport CheckboxGroupInputBinding from './checkbox-group.js'\nimport FormInputBinding from './form.js'\nimport LinkInputBinding from './link.js'\nimport ListGroupInputBinding from './list-group.js'\n\nfunction registerInputBindings() {\n  if (Shiny) {\n    const inputBindings = Shiny.inputBindings\n\n    inputBindings.register(new ButtonInputBinding(), ButtonInputBinding.type)\n    inputBindings.register(new CheckboxInputBinding(), CheckboxInputBinding.type)\n    inputBindings.register(new CheckboxGroupInputBinding(), CheckboxGroupInputBinding.type)\n    inputBindings.register(new FormInputBinding(), FormInputBinding.type)\n    inputBindings.register(new LinkInputBinding(), LinkInputBinding.type)\n    inputBindings.register(new ListGroupInputBinding(), ListGroupInputBinding.type)\n  }\n}\n\nexport {\n  registerInputBindings\n}","import { registerInputBindings } from './bindings/inputs'\n\nregisterInputBindings()\n"],"mappings":"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","ignoreList":[]}