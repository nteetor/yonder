{"version":3,"file":"bsides.js","sources":["../../js/bindings/inputs/input.js","../../js/bindings/inputs/checkbox.js","../../js/bindings/inputs/checkbox-button.js","../../js/bindings/inputs/form.js","../../js/bindings/inputs/index.js","../../js/bsides.js"],"sourcesContent":["import $ from 'jquery'\n\nclass InputBinding {\n  static get prefix() {\n    return 'bsides'\n  }\n\n  static get type() {\n    throw 'not implemented'\n  }\n\n  static get namespace() {\n    return `.${this.type}`\n  }\n\n  get events() {\n    return []\n  }\n\n  constructor() {\n    this.priority = 'deferred'\n  }\n\n  find(scope) {\n    return $(scope).find(`.${this.constructor.prefix}-${this.constructor.type}`)\n  }\n\n  getId(element) {\n    return element.id\n  }\n\n  getType(element) {\n    return null\n  }\n\n  getValue(element) {\n    throw 'not implemented'\n  }\n\n  subscribe(element, callback) {\n    this.events.forEach((event) => {\n      $(element).on(`${event}${this.constructor.namespace}`, () => {\n        callback(this.priority)\n      })\n    })\n  }\n\n  unsubscribe(element) {\n    $(element).off(this.namespace)\n  }\n\n  receiveMessage(element, data) {\n    throw 'not implemented'\n  }\n\n  getState(element) {\n    throw 'not implemented'\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  initialize(element) {\n\n  }\n\n  dispose(element) {\n\n  }\n}\n\nexport default InputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxInputBinding extends InputBinding {\n  static get type() {\n    return 'checkbox'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      choice: '.form-check-label',\n      value: '.form-check-input'\n    }\n  }\n\n  getType(element) {\n    console.log(this.constructor)\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    let pairs =\n      $(element)\n      .find(this.selectors.value)\n      .map((i, e) => [[e.value, e.checked]])\n      .get()\n\n    return Object.fromEntries(pairs)\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n    const $values = $element.find(this.selectors.value)\n\n    if (data.hasOwnProperty('options')) {\n      $element.find('.form-check').remove()\n      $element.html(data.options)\n    }\n\n    if (data.hasOwnProperty('select')) {\n      $values.prop('checked', false)\n\n      $values\n        .filter((i, e) => data.select.includes(e.value))\n        .prop('checked', true)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $values.prop('disabled', false)\n\n      $values\n        .filter((i, e) => data.disable.includes(e.value))\n        .prop('disabled', true)\n    }\n\n    $element.trigger('change')\n  }\n}\n\nexport default CheckboxInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass CheckboxButtonInputBinding extends InputBinding {\n  static get type() {\n    return 'checkboxbutton'\n  }\n\n  get events() {\n    return ['change']\n  }\n\n  get selectors() {\n    return {\n      choice: '.btn',\n      value: '.btn-check'\n    }\n  }\n\n  getType(element) {\n    console.log(this.constructor)\n    return `${this.constructor.prefix}${this.constructor.namespace}`\n  }\n\n  getValue(element) {\n    let pairs =\n      $(element)\n      .find(this.selectors.value)\n      .map((i, e) => [[e.value, e.checked]])\n      .get()\n\n    return Object.fromEntries(pairs)\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n    const $values = $element.find(this.selectors.value)\n\n    if (data.hasOwnProperty('options')) {\n      $element\n        .find(`${this.selectors.choice},${this.selectors.value}`)\n        .remove()\n\n      $element.html(data.options)\n    }\n\n    if (data.hasOwnProperty('select')) {\n      $values.prop('checked', false)\n\n      console.log($values)\n      console.log($values.filter((i, e) => data.select.includes(e.value)))\n\n      $values\n        .filter((i, e) => data.select.includes(e.value))\n        .prop('checked', true)\n    }\n\n    if (data.hasOwnProperty('disable')) {\n      $values.prop('disabled', false)\n\n      $values\n        .filter((i, e) => data.disable.includes(e.value))\n        .prop('disabled', true)\n    }\n\n    $element.trigger('change')\n  }\n}\n\nexport default CheckboxButtonInputBinding\n","import $ from 'jquery'\n\nimport InputBinding from './input.js'\n\nclass FormInputBinding extends InputBinding {\n  static get type() {\n    return 'form'\n  }\n\n  get events() {\n    return ['submit']\n  }\n\n  get selectors() {\n    return {\n      submit: '.bsides-btn-submit'\n    }\n  }\n\n  initialize(element) {\n    const $element = $(element)\n\n    let inputValues = new Map()\n\n    $element.on(`shiny:inputchanged${this.constructor.namespace}`, (event) => {\n      console.log(event)\n\n      if (!event.el || event.priority === 'event') {\n        return\n      }\n\n      if (event.el.id === element.id) {\n        // Shiny.setInputValue(element.id, value, { priority: 'event' })\n        event.preventDefault()\n        return\n      }\n\n      if (element.contains(event.el)) {\n        inputValues.set(event.name, event.value)\n        event.preventDefault()\n      }\n    })\n\n    $element.on(`click${this.constructor.namespace}`, this.selectors.submit, (event) => {\n      event.preventDefault()\n\n      for (const [key, value] of inputValues.entries()) {\n        console.log(`${key}: ${value}`)\n        Shiny.setInputValue(key, value, { priority: 'event' })\n      }\n    })\n  }\n\n  getValue(element) {\n    return null\n  }\n\n  receiveMessage(element, data) {\n    const $element = $(element)\n\n    if (data.submit === true) {\n      $element.trigger(`submit${namespace}`)\n    }\n  }\n}\n\nexport default FormInputBinding\n","import CheckboxInputBinding from './checkbox.js'\nimport CheckboxButtonInputBinding from './checkbox-button.js'\nimport FormInputBinding from './form.js'\n\nfunction registerInputBindings() {\n  if (Shiny) {\n    const inputBindings = Shiny.inputBindings\n\n    inputBindings.register(new CheckboxInputBinding(), CheckboxInputBinding.type)\n    inputBindings.register(new CheckboxButtonInputBinding(), CheckboxButtonInputBinding.type)\n    inputBindings.register(new FormInputBinding(), FormInputBinding.type)\n  }\n}\n\nexport {\n  registerInputBindings\n}","import { registerInputBindings } from './bindings/inputs'\n\nregisterInputBindings()\n"],"names":["InputBinding","prefix","type","namespace","events","constructor","priority","find","scope","$","getId","element","id","getType","getValue","subscribe","callback","forEach","event","on","unsubscribe","off","receiveMessage","data","getState","getRatePolicy","initialize","dispose","CheckboxInputBinding","selectors","choice","value","console","log","pairs","map","i","e","checked","get","Object","fromEntries","$element","$values","hasOwnProperty","remove","html","options","prop","filter","select","includes","disable","trigger","CheckboxButtonInputBinding","FormInputBinding","submit","inputValues","Map","el","preventDefault","contains","set","name","key","entries","Shiny","setInputValue","registerInputBindings","inputBindings","register"],"mappings":"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"}