{"version":3,"file":"bsides.js","sources":["../../js/utils/input-store.js","../../js/inputs/input.js","../../js/inputs/button.js","../../js/inputs/link.js","../../js/bsides.js"],"sourcesContent":["const inputStore = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!inputStore.has(element)) {\n      inputStore.set(element, new Map())\n    }\n\n    const instanceStore = inputStore.get(element)\n\n    if (!instanceStore.has(key) && instanceStore.size !== 0) {\n      return\n    }\n\n    instanceStore.set(key, instance)\n  },\n  get(element, key) {\n    if (inputStore.has(element)) {\n      return inputStore.get(element).get(key) || null\n    }\n\n    return null\n  },\n  remove(element, key) {\n    if (!inputStore.has(element)) {\n      return\n    }\n\n    const store = inputStore.get(element)\n\n    store.delete(key)\n\n    if (store.size === 0) {\n      inputStore.delete(element)\n    }\n  }\n}","import $ from 'jquery'\n\nimport InputStore from '../utils/input-store.js'\n\nclass Input {\n  static get type() {\n    return `bsides.${this.name}`\n  }\n\n  static get namespace() {\n    return `.${this.type}`\n  }\n\n  static get events() {\n    return null\n  }\n\n  static get selector() {\n    return `.bsides-${this.name}`\n  }\n\n  #value = null\n  #debounce = false\n  #callback = (debounce) => {}\n  #element = null\n\n  constructor(element) {\n    this.#element = element\n\n    InputStore.set(element, this.constructor.type, this)\n  }\n\n  get value() {\n    return this.#value\n  }\n\n  set value(x) {\n    this.#value = x\n    this.#callback(this.#debounce)\n  }\n\n  // garbo arg name\n  set label(x) {\n    throw \"not implemented\"\n  }\n\n  get label() {\n    return null\n  }\n\n  get callback() {\n    return this.#callback\n  }\n\n  set callback(f) {\n    this.#callback = f\n  }\n\n  get element() {\n    return this.#element\n  }\n\n  dispose() {\n    this.#callback = (debounce) => {}\n    this.#value = null\n    InputStore.remove(element, this.constructor.type)\n  }\n\n  // static\n\n  static find(scope) {\n    return $(scope).find(this.selector)\n  }\n\n  static getId(element) {\n    return element.id\n  }\n\n  static getType(element) {\n    return null\n    element // unused\n  }\n\n  static getValue(element) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return null\n    }\n\n    return input.value\n  }\n\n  static subscribe(element, callback) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return\n    }\n\n    input.callback = callback\n  }\n\n  static unsubscribe(element) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static receiveMessage(element, data) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return\n    }\n\n    for (const [key, value] of Object.entries(data)) {\n      if (key === 'value') {\n        // nothing confusing here\n        input.value = value\n      } else if (key === 'label') {\n        input.label = value\n      } else if (key === 'disable') {\n        input.disable(value)\n      }\n    }\n  }\n\n  static getState(element) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return\n    }\n\n    return { value: input.value }\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  static getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  static initialize(element) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      input = new this(element)\n    }\n  }\n\n  static dispose(element) {\n    let input = InputStore.get(element, this.type)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static ShinyInterface() {\n    return this\n  }\n}\n\nexport default Input\n","import $ from 'jquery'\n\nimport InputStore from '../utils/input-store.js'\nimport Input from './input.js'\n\nclass ButtonInput extends Input {\n  static get name() {\n    return 'button'\n  }\n\n  static get events() {\n    return `click${this.namespace}`\n  }\n\n  constructor(element) {\n    super(element)\n\n    this.value = 0\n  }\n\n  set label(x) {\n    this.element.innerHTML = x\n  }\n\n  get label() {\n    this.element.innerHTML\n  }\n\n  // this argument name is garbo\n  disable(x) {\n    if (x === true) {\n      this.element.setAttribute('disabled', '')\n    } else {\n      this.element.removeAttribute('disabled')\n    }\n\n    return this\n  }\n}\n\n$(document).on(ButtonInput.events, ButtonInput.selector, (event) => {\n  let button = InputStore.get(event.currentTarget, ButtonInput.type)\n\n  if (!button) {\n    return\n  }\n\n  button.value++\n})\n\nif (Shiny) {\n  Shiny.inputBindings.register(ButtonInput.ShinyInterface())\n}\n\nexport default ButtonInput\n","import $ from 'jquery'\n\nimport Input from './input.js'\nimport InputStore from '../utils/input-store.js'\n\nclass LinkInput extends Input {\n  static get name() {\n    return 'link'\n  }\n\n  static get events() {\n    return `click.${this.namespace}`\n  }\n\n  constructor(element) {\n    super(element)\n\n    this.value = 0\n  }\n\n  set label(x) {\n    this.element.innerHTML = x\n  }\n\n  get label() {\n    this.element.innerHTML\n  }\n\n  disable(x) {\n    if (x === \"true\") {\n      this.element.setAttribute(\"disabled\", \"\")\n    } else {\n      this.element.removeAttribute(\"disabled\")\n    }\n  }\n}\n\n$(document).on(LinkInput.events, LinkInput.selector, (event) => {\n  let link = InputStore.get(event.currentTarget, LinkInput.type)\n\n  if (!link) {\n    return\n  }\n\n  link.value++\n})\n\nif (Shiny) {\n  Shiny.inputBindings.register(LinkInput.ShinyInterface())\n}\n\nexport default LinkInput\n","import ButtonInput from './inputs/button.js'\nimport LinkInput from './inputs/link.js'\n\nexport default {\n  ButtonInput,\n  LinkInput\n}\n"],"names":["inputStore","Map","set","element","key","instance","has","instanceStore","get","size","remove","store","delete","Input","type","name","namespace","events","selector","debounce","constructor","InputStore","value","x","label","callback","f","dispose","find","scope","$","getId","id","getType","getValue","input","subscribe","unsubscribe","receiveMessage","data","Object","entries","disable","getState","getRatePolicy","initialize","ShinyInterface","ButtonInput","innerHTML","setAttribute","removeAttribute","document","on","event","button","currentTarget","Shiny","inputBindings","register","LinkInput","link"],"mappings":"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"}