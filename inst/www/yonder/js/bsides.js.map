{"version":3,"file":"bsides.js","sources":["../../js/bound-inputs.js","../../js/input.js","../../js/button.js","../../js/bsides.js"],"sourcesContent":["const boundInputs = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!boundInputs.has(element)) {\n      boundInputs.set(element, new Map())\n    }\n\n    const store = boundInputs.get(element)\n\n    if (!store.has(key) && store.size !== 0) {\n      return\n    }\n\n    store.set(key, instance)\n\n    console.log(boundInputs)\n  },\n  get(element, key) {\n    if (boundInputs.has(element)) {\n      return boundInputs.get(element).get(key) || null\n    }\n\n    return null\n  },\n  remove(element, key) {\n    if (!boundInputs.has(element)) {\n      return\n    }\n\n    const store = boundInputs.get(element)\n\n    store.delete(key)\n\n    if (store.size === 0) {\n      boundInputs.delete(element)\n    }\n  }\n}","import $ from 'jquery'\nimport BoundInputs from './bound-inputs.js'\n\nclass Input {\n  // getters\n\n  static get BINDING_KEY() {\n    return `bsides.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.BINDING_KEY}`\n  }\n\n  static get EVENTS() {\n    return null\n  }\n\n  static get SELECTOR() {\n    return `.bsides-${this.NAME}`\n  }\n\n  // public\n\n  constructor(element) {\n    this._element = element\n    this._value = null\n    this._debounce = false\n    this._callback = (debounce) => {}\n\n    BoundInputs.set(element, this.constructor.BINDING_KEY, this)\n  }\n\n  value(x) {\n    return null\n  }\n\n  content(x) {\n    return null\n  }\n\n  dispose() {\n    this._callback = () => {}\n    BoundInputs.remove(element, this.constructor.BINDING_KEY)\n  }\n\n  // static\n\n  static find(scope) {\n    return $(scope).find(this.SELECTOR)\n  }\n\n  static getId(element) {\n    return element.id\n  }\n\n  static getType(element) {\n    return null\n    element // unused\n  }\n\n  static getValue(element) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return null\n    }\n\n    return input.value()\n  }\n\n  static subscribe(element, callback) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    console.log(input)\n\n    input._callback = callback\n\n    console.log(input._callback)\n  }\n\n  static unsubscribe(element) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static receiveMessage(element, data) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    data.forEach((msg) => {\n      let [method, args = []] = msg\n\n      input[method](...args)\n    })\n  }\n\n  static getState(element) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    return { value: input.value() }\n  }\n\n  // @return { policy: RatePolicyModes, delay: number }\n  static getRatePolicy(element) {\n    return null\n    element // unused\n  }\n\n  static initialize(element) {\n    element // unused\n  }\n\n  static dispose(element) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      return\n    }\n\n    input.dispose()\n  }\n\n  static ShinyInterface() {\n    /*return {\n      find: this.find,\n      getId: this.getId,\n      getType: this.getType,\n      getValue: this.getValue,\n      subscribe: this.subscribe,\n      unsubscribe: this.unsubscribe,\n      receiveMessage: this.receiveMessage,\n      getState: this.getState,\n      getRatePolicy: this.getRatePolicy,\n      initialize: this.initialize,\n      dispose: this.dispose\n    }*/\n    return this\n  }\n}\n\nexport default Input\n","import $ from 'jquery'\nimport Input from './input.js'\nimport BoundInputs from './bound-inputs.js'\n\nclass ButtonInput extends Input {\n  static get NAME() {\n    return 'button'\n  }\n\n  static get EVENTS() {\n    return `click${this.EVENT_KEY}`\n  }\n\n  constructor(element) {\n    super(element)\n\n    this._value = 0\n  }\n\n  value(x) {\n    if (typeof x === 'undefined') {\n      return this._value\n    }\n\n    this._value = x\n    this._callback(this._debounce)\n\n    return this\n  }\n\n  content(text) {\n    this._element.innerHTML = text\n\n    return this\n  }\n\n  static initialize(element) {\n    let input = BoundInputs.get(element, this.BINDING_KEY)\n\n    if (!input) {\n      input = new ButtonInput(element)\n    }\n  }\n\n  static subscribe(element, callback) {\n    $(element).on(\"click\", (event) => {\n      callback()\n    })\n  }\n}\n\n$(document).on(ButtonInput.EVENTS, ButtonInput.SELECTOR, (event) => {\n  let button = BoundInputs.get(event.currentTarget, ButtonInput.BINDING_KEY)\n\n  if (!button) {\n    return\n  }\n\n  button.value(button.value() + 1)\n})\n\nif (Shiny) {\n  Shiny.inputBindings.register(ButtonInput.ShinyInterface())\n}\n\nexport default ButtonInput\n","import Input from './input.js'\nimport ButtonInput from './button.js'\n\nexport default {\n  Input,\n  ButtonInput\n}\n"],"names":["boundInputs","Map","set","element","key","instance","has","store","get","size","console","log","remove","delete","Input","BINDING_KEY","NAME","EVENT_KEY","EVENTS","SELECTOR","constructor","_element","_value","_debounce","_callback","debounce","BoundInputs","value","x","content","dispose","find","scope","$","getId","id","getType","getValue","input","subscribe","callback","unsubscribe","receiveMessage","data","forEach","msg","method","args","getState","getRatePolicy","initialize","ShinyInterface","ButtonInput","text","innerHTML","on","event","document","button","currentTarget","Shiny","inputBindings","register"],"mappings":"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"}